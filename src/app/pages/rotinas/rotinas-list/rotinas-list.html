<div class="rotinas-page-wrapper">

  <a [routerLink]="['/home']" class="btn-back">
    <span class="arrow">&larr;</span> Voltar ao Início
  </a>

  <header class="header-rotina">
    <h1 class="brand-title">PeleNativa</h1>
    <p class="tagline">Crie seu ritual personalizado</p>
  </header>

  <div class="container-criacao">

    <div class="nome-rotina-box">
      <input
        [(ngModel)]="nome"
        name="nomeRotina"
        placeholder="Dê um nome ao seu ritual"
        class="input-ritual"
      />
      <div class="input-focus-line"></div>
    </div>

    <div class="etapas-grid">
      <div
        *ngFor="let etapa of ['limpeza','tratamento','hidratacao','protecao']"
        class="etapa-card"
      >

        <div class="etapa-header">
          <span class="etapa-label">Etapa</span>
          <h3>{{ etapa | titlecase }}</h3>
        </div>

        <div
          *ngFor="let ativo of ativosPorEtapa[etapa]"
          class="ativo-checkbox-wrapper"
        >
          <label class="check-item">
            <input
              type="checkbox"
              (change)="toggleAtivo(etapa, ativo.id, $event)"
            >
            <span class="custom-check"></span>
            <span class="ativo-nome">{{ ativo.nome }}</span>
          </label>
        </div>

      </div>
    </div>

    <div class="footer-actions">
      <button (click)="salvar()" class="btn-salvar-ritual">
        Salvar Rotina
      </button>
    </div>

  </div>

  <!-- ROTINAS SALVAS -->
  <section class="rotinas-salvas">
    <h2 class="titulo-rotinas">Minhas Rotinas Salvas</h2>

    <p *ngIf="rotinasSalvas.length === 0">
      Nenhuma rotina salva ainda.
    </p>

    <div class="rotinas-grid">
      <div class="rotina-card" *ngFor="let rotina of rotinasSalvas">

        <h3>{{ rotina.nome }}</h3>

        <div class="acoes-rotina">
          <button class="btn-excluir" (click)="remover(rotina.id)">
            Excluir
          </button>
        </div>

        <div class="rotina-etapas">
          <div *ngFor="let etapa of rotina.etapas">
            <strong>{{ etapa.etapa | titlecase }}:</strong>

            <span *ngFor="let ativo of etapa.ativos; let i = index">
              {{ ativo.nome }}
              <span *ngIf="i < etapa.ativos.length - 1">, </span>
            </span>

          </div>
        </div>

      </div>
    </div>
  </section>

</div>
